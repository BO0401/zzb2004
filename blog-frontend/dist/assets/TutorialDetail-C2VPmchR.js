import{_ as H}from"./avatar-DukeFiyW.js";import{d as _t,r as u,J as vt,x as pt,o as mt,b as c,g as a,i as h,e as t,w as n,h as d,t as i,C as x,j as v,v as J,I as R,E as ht,D as ft,K as kt,L as gt,A as k,F as w,l as b,M as yt,n as wt,N as bt,y as Ct,B as Tt,p as r,q as Lt,O as xt,H as m,P as At,Q as Bt,_ as St}from"./index-CZfFl8eH.js";const Vt={class:"tutorial-detail-page"},Pt={key:0,class:"loading-container"},$t={key:1,class:"tutorial-content"},Dt={class:"tutorial-header"},It={class:"container"},jt={class:"header-content"},Mt={class:"tutorial-info"},Nt={class:"tutorial-meta"},Et={class:"category-tag"},zt={class:"tutorial-title"},Rt={class:"tutorial-description"},Zt={class:"tutorial-stats"},Ft={class:"stat-item"},Ot={class:"stat-item"},qt={class:"stat-item"},Ht={class:"stat-item"},Jt={class:"tutorial-actions"},Kt={class:"main-content"},Qt={class:"container"},Ut={class:"content-layout"},Gt={class:"article-content"},Wt={key:0,class:"table-of-contents"},Xt={class:"toc-list"},Yt=["onClick"],te=["innerHTML"],ee={key:1,class:"article-tags"},se={class:"tags-list"},ae={class:"article-navigation"},oe={key:0,class:"nav-item prev"},le={key:1,class:"nav-item next"},ie={class:"sidebar"},ne={class:"author-card"},re={class:"author-info"},ce={class:"author-stats"},de={class:"stat"},ue={class:"stat-number"},_e={class:"stat"},ve={class:"stat-number"},pe={class:"stat"},me={class:"stat-number"},he={class:"related-tutorials"},fe={class:"related-list"},ke=["onClick"],ge={class:"related-image"},ye=["src","alt"],we={class:"related-content"},be={class:"related-title"},Ce={class:"related-meta"},Te={class:"related-views"},Le={class:"related-date"},xe={key:0,class:"toc-sidebar"},Ae={class:"toc-nav"},Be=["onClick"],Se={class:"comments-section"},Ve={class:"container"},Pe={class:"comments-container"},$e={class:"comments-title"},De={class:"comment-form"},Ie={class:"form-header"},je={class:"form-content"},Me={class:"form-actions"},Ne={class:"comments-list"},Ee={class:"comment-avatar"},ze=["src","alt"],Re={class:"comment-content"},Ze={class:"comment-header"},Fe={class:"comment-author"},Oe={class:"comment-date"},qe={class:"comment-text"},He={class:"comment-actions"},Je=["onClick"],Ke=["onClick"],Qe={key:0,class:"replies-list"},Ue={class:"reply-avatar"},Ge=["src","alt"],We={class:"reply-content"},Xe={class:"reply-header"},Ye={class:"reply-author"},ts={class:"reply-date"},es={class:"reply-text"},ss={key:0,class:"load-more"},as={key:2,class:"error-container"},os=_t({__name:"TutorialDetail",setup(ls){const P=Ct(),K=Tt(),$=u(!0),l=u(null),C=u([]),D=u(""),I=u(),j=u(!1),M=u(!1),N=u(!1),E=u(!1),Z=u(!0),g=u(""),A=u([]),B=u(null),S=u(null),F=u([]),z=vt({articles:45,views:128e3,likes:5600}),Q=async()=>{try{$.value=!0,await new Promise(s=>setTimeout(s,1e3)),l.value={id:P.params.id,title:"Vue 3 Composition API 完全指南",description:"深入学习 Vue 3 的 Composition API，掌握现代 Vue 开发的核心技能",category:"Vue.js",difficulty:"intermediate",status:"published",views:15420,likes:892,readTime:15,isLiked:!1,isBookmarked:!1,createdAt:"2024-01-15",updatedAt:"2024-01-20",tags:["Vue 3","Composition API","JavaScript","Frontend"],content:`
        <h2 id="introduction">介绍</h2>
        <p>vue 3 的 composition api 是一个全新的 api 设计，它提供了更灵活的组件逻辑组织方式...</p>
        
        <h2 id="setup-function">setup 函数</h2>
        <p>setup 函数是 composition api 的入口点...</p>
        
        <h3 id="reactive-data">响应式数据</h3>
        <p>在 composition api 中，我们使用 ref 和 reactive 来创建响应式数据...</p>
        
        <h2 id="lifecycle-hooks">生命周期钩子</h2>
        <p>composition api 提供了对应的生命周期钩子函数...</p>
        
        <h2 id="computed-watch">计算属性和监听器</h2>
        <p>computed 和 watch 在 composition api 中的使用方式...</p>
        
        <h2 id="conclusion">总结</h2>
        <p>通过本教程，你应该已经掌握了 vue 3 composition api 的核心概念...</p>
      `},F.value=[{id:"2",title:"Vue 3 响应式原理深度解析",cover:"/tutorial-2.jpg",views:8900,createdAt:"2024-01-10"},{id:"3",title:"Pinia 状态管理实战指南",cover:"/tutorial-3.jpg",views:6700,createdAt:"2024-01-08"},{id:"4",title:"Vue Router 4 路由配置详解",cover:"/tutorial-4.jpg",views:5400,createdAt:"2024-01-05"}],B.value={id:"0",title:"Vue 3 基础入门教程"},S.value={id:"2",title:"Vue 3 响应式原理深度解析"},A.value=[{id:"1",user:{name:"张三",avatar:"/user-1.jpg"},content:"这篇教程写得很详细，对我理解 Composition API 很有帮助！",likes:12,isLiked:!1,createdAt:"2024-01-21",replies:[{id:"1-1",user:{name:"ZZB2004",avatar:"/avatar.jpg"},content:"谢谢你的反馈！很高兴这篇教程对你有帮助。",createdAt:"2024-01-21"}]},{id:"2",user:{name:"李四",avatar:"/user-2.jpg"},content:"能否再详细讲解一下 computed 和 watch 的区别？",likes:8,isLiked:!1,createdAt:"2024-01-20",replies:[]}],await Bt(),U()}catch(s){console.error("获取教程详情失败:",s),l.value=null}finally{$.value=!1}},U=()=>{if(!I.value)return;const s=I.value.querySelectorAll("h2, h3, h4");C.value=Array.from(s).map(e=>({id:e.id,text:e.textContent,level:parseInt(e.tagName.charAt(1))}))},O=s=>{const e=document.getElementById(s);e&&e.scrollIntoView({behavior:"smooth"})},T=s=>s>=1e4?(s/1e4).toFixed(1)+"w":s>=1e3?(s/1e3).toFixed(1)+"k":s.toString(),V=s=>new Date(s).toLocaleDateString("zh-CN"),G=s=>({beginner:"入门",intermediate:"中级",advanced:"高级"})[s]||s,W=s=>({draft:"草稿",published:"已发布",updated:"已更新"})[s]||s,X=async()=>{if(l.value){j.value=!0;try{await new Promise(s=>setTimeout(s,500)),l.value.isLiked=!l.value.isLiked,l.value.likes+=l.value.isLiked?1:-1,m.success(l.value.isLiked?"点赞成功":"取消点赞"),await new Promise(s=>{setTimeout(()=>{l.value.isLiked=!l.value.isLiked,l.value.likes+=l.value.isLiked?1:-1,s(void 0)},500)})}catch{m.error("操作失败")}finally{j.value=!1}}},Y=async()=>{if(l.value){M.value=!0;try{await new Promise(s=>setTimeout(s,500)),l.value.isBookmarked=!l.value.isBookmarked,m.success(l.value.isBookmarked?"收藏成功":"取消收藏")}catch{m.error("操作失败")}finally{M.value=!1}}},tt=()=>{var s,e;navigator.share?navigator.share({title:(s=l.value)==null?void 0:s.title,text:(e=l.value)==null?void 0:e.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),m.success("链接已复制到剪贴板"))},et=s=>{K.push({path:"/tutorials",query:{tag:s}})},st=async()=>{if(g.value.trim()){N.value=!0;try{await new Promise(e=>setTimeout(e,1e3));const s={id:Date.now().toString(),user:{name:"当前用户",avatar:"/avatar.jpg"},content:g.value,likes:0,isLiked:!1,createdAt:new Date().toISOString(),replies:[]};A.value.unshift(s),g.value="",m.success("评论发表成功")}catch{m.error("评论发表失败")}finally{N.value=!1}}},at=async s=>{try{await new Promise(e=>setTimeout(e,300)),s.isLiked=!s.isLiked,s.likes+=s.isLiked?1:-1,await new Promise(e=>{setTimeout(()=>{s.isLiked=!s.isLiked,s.likes+=s.isLiked?1:-1,e(void 0)},500)})}catch{m.error("操作失败")}},ot=s=>{At.prompt("请输入回复内容","回复评论",{confirmButtonText:"发送",cancelButtonText:"取消",inputType:"textarea"}).then(({value:e})=>{if(e){const y={id:Date.now().toString(),user:{name:"当前用户",avatar:"/avatar.jpg"},content:e,createdAt:new Date().toISOString()};s.replies||(s.replies=[]),s.replies.push(y),m.success("回复成功")}}).catch(()=>{})},lt=async()=>{E.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),Z.value=!1,m.info("没有更多评论了")}catch{m.error("加载失败")}finally{E.value=!1}},it=()=>{const s=document.querySelectorAll("h2[id], h3[id], h4[id]");let e="";s.forEach(y=>{y.getBoundingClientRect().top<=100&&(e=y.id)}),D.value=e};return pt(()=>P.params.id,()=>{P.params.id&&Q()},{immediate:!0}),mt(()=>{window.addEventListener("scroll",it)}),(s,e)=>{const y=h("el-skeleton"),L=h("el-breadcrumb-item"),nt=h("el-breadcrumb"),_=h("el-icon"),f=h("el-button"),rt=h("el-tag"),q=h("router-link"),ct=h("el-input"),dt=h("el-result"),ut=h("el-backtop");return r(),c("div",Vt,[$.value?(r(),c("div",Pt,[a(y,{rows:10,animated:""})])):l.value?(r(),c("div",$t,[t("section",Dt,[t("div",It,[t("div",jt,[a(nt,{separator:"/",class:"breadcrumb"},{default:n(()=>[a(L,{to:{path:"/"}},{default:n(()=>e[2]||(e[2]=[d("首页",-1)])),_:1,__:[2]}),a(L,{to:{path:"/tutorials"}},{default:n(()=>e[3]||(e[3]=[d("前端教程",-1)])),_:1,__:[3]}),a(L,null,{default:n(()=>[d(i(l.value.category),1)]),_:1}),a(L,{class:"current"},{default:n(()=>[d(i(l.value.title),1)]),_:1})]),_:1}),t("div",Mt,[t("div",Nt,[t("span",Et,i(l.value.category),1),t("span",{class:x(["difficulty-tag",l.value.difficulty])},i(G(l.value.difficulty)),3),t("span",{class:x(["status-tag",l.value.status])},i(W(l.value.status)),3)]),t("h1",zt,i(l.value.title),1),t("p",Rt,i(l.value.description),1),t("div",Zt,[t("div",Ft,[a(_,null,{default:n(()=>[a(v(J))]),_:1}),t("span",null,i(T(l.value.views))+" 阅读",1)]),t("div",Ot,[a(_,null,{default:n(()=>[a(v(R))]),_:1}),t("span",null,i(T(l.value.likes))+" 点赞",1)]),t("div",qt,[a(_,null,{default:n(()=>[a(v(ht))]),_:1}),t("span",null,i(l.value.readTime)+" 分钟阅读",1)]),t("div",Ht,[a(_,null,{default:n(()=>[a(v(ft))]),_:1}),t("span",null,i(V(l.value.updatedAt)),1)])]),t("div",Jt,[a(f,{type:"primary",size:"large",onClick:X,loading:j.value},{default:n(()=>[a(_,null,{default:n(()=>[a(v(R))]),_:1}),d(" "+i(l.value.isLiked?"已点赞":"点赞"),1)]),_:1},8,["loading"]),a(f,{size:"large",onClick:Y,loading:M.value},{default:n(()=>[a(_,null,{default:n(()=>[a(v(kt))]),_:1}),d(" "+i(l.value.isBookmarked?"已收藏":"收藏"),1)]),_:1},8,["loading"]),a(f,{size:"large",onClick:tt},{default:n(()=>[a(_,null,{default:n(()=>[a(v(gt))]),_:1}),e[4]||(e[4]=d(" 分享 ",-1))]),_:1,__:[4]})])])])])]),t("section",Kt,[t("div",Qt,[t("div",Ut,[t("article",Gt,[C.value.length>0?(r(),c("div",Wt,[e[5]||(e[5]=t("h3",null,"目录",-1)),t("ul",Xt,[(r(!0),c(w,null,b(C.value,o=>(r(),c("li",{key:o.id,class:x(["toc-item",`level-${o.level}`,{active:D.value===o.id}])},[t("a",{onClick:p=>O(o.id),class:"toc-link"},i(o.text),9,Yt)],2))),128))])])):k("",!0),t("div",{class:"markdown-content",innerHTML:l.value.content,ref_key:"contentRef",ref:I},null,8,te),l.value.tags&&l.value.tags.length>0?(r(),c("div",ee,[e[6]||(e[6]=t("h4",null,"相关标签",-1)),t("div",se,[(r(!0),c(w,null,b(l.value.tags,o=>(r(),Lt(rt,{key:o,class:"tag-item",onClick:p=>et(o)},{default:n(()=>[d(i(o),1)]),_:2},1032,["onClick"]))),128))])])):k("",!0),t("div",ae,[B.value?(r(),c("div",oe,[e[7]||(e[7]=t("span",{class:"nav-label"},"上一篇",-1)),a(q,{to:`/tutorials/${B.value.id}`,class:"nav-link"},{default:n(()=>[a(_,null,{default:n(()=>[a(v(yt))]),_:1}),d(" "+i(B.value.title),1)]),_:1},8,["to"])])):k("",!0),S.value?(r(),c("div",le,[e[8]||(e[8]=t("span",{class:"nav-label"},"下一篇",-1)),a(q,{to:`/tutorials/${S.value.id}`,class:"nav-link"},{default:n(()=>[d(i(S.value.title)+" ",1),a(_,null,{default:n(()=>[a(v(wt))]),_:1})]),_:1},8,["to"])])):k("",!0)])]),t("aside",ie,[t("div",ne,[e[16]||(e[16]=t("div",{class:"author-avatar"},[t("img",{src:H,alt:"ZZB2004"})],-1)),t("div",re,[e[13]||(e[13]=t("h4",{class:"author-name"},"ZZB2004",-1)),e[14]||(e[14]=t("p",{class:"author-title"},"前端开发者",-1)),e[15]||(e[15]=t("p",{class:"author-desc"},"专注于现代前端技术，热爱分享与学习",-1)),t("div",ce,[t("div",de,[t("span",ue,i(z.articles),1),e[9]||(e[9]=t("span",{class:"stat-label"},"文章",-1))]),t("div",_e,[t("span",ve,i(T(z.views)),1),e[10]||(e[10]=t("span",{class:"stat-label"},"阅读",-1))]),t("div",pe,[t("span",me,i(T(z.likes)),1),e[11]||(e[11]=t("span",{class:"stat-label"},"点赞",-1))])]),a(f,{type:"primary",size:"small",class:"follow-btn"},{default:n(()=>[a(_,null,{default:n(()=>[a(v(bt))]),_:1}),e[12]||(e[12]=d(" 关注 ",-1))]),_:1,__:[12]})])]),t("div",he,[e[17]||(e[17]=t("h4",null,"相关教程",-1)),t("div",fe,[(r(!0),c(w,null,b(F.value,o=>(r(),c("div",{key:o.id,class:"related-item",onClick:p=>s.$router.push(`/tutorials/${o.id}`)},[t("div",ge,[t("img",{src:o.cover,alt:o.title},null,8,ye)]),t("div",we,[t("h5",be,i(o.title),1),t("div",Ce,[t("span",Te,[a(_,null,{default:n(()=>[a(v(J))]),_:1}),d(" "+i(T(o.views)),1)]),t("span",Le,i(V(o.createdAt)),1)])])],8,ke))),128))])]),C.value.length>0?(r(),c("div",xe,[e[18]||(e[18]=t("h4",null,"文章目录",-1)),t("ul",Ae,[(r(!0),c(w,null,b(C.value,o=>(r(),c("li",{key:o.id,class:x(["toc-nav-item",`level-${o.level}`,{active:D.value===o.id}])},[t("a",{onClick:p=>O(o.id),class:"toc-nav-link"},i(o.text),9,Be)],2))),128))])])):k("",!0)])])])]),t("section",Se,[t("div",Ve,[t("div",Pe,[t("h3",$e," 评论 ("+i(A.value.length)+") ",1),t("div",De,[t("div",Ie,[e[20]||(e[20]=t("div",{class:"user-avatar"},[t("img",{src:H,alt:"用户头像"})],-1)),t("div",je,[a(ct,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),type:"textarea",rows:4,placeholder:"写下你的评论...",maxlength:"500","show-word-limit":""},null,8,["modelValue"]),t("div",Me,[a(f,{type:"primary",onClick:st,loading:N.value,disabled:!g.value.trim()},{default:n(()=>e[19]||(e[19]=[d(" 发表评论 ",-1)])),_:1,__:[19]},8,["loading","disabled"])])])])]),t("div",Ne,[(r(!0),c(w,null,b(A.value,o=>(r(),c("div",{key:o.id,class:"comment-item"},[t("div",Ee,[t("img",{src:o.user.avatar,alt:o.user.name},null,8,ze)]),t("div",Re,[t("div",Ze,[t("span",Fe,i(o.user.name),1),t("span",Oe,i(V(o.createdAt)),1)]),t("div",qe,i(o.content),1),t("div",He,[t("button",{class:x(["action-btn",{liked:o.isLiked}]),onClick:p=>at(o)},[a(_,null,{default:n(()=>[a(v(R))]),_:1}),d(" "+i(o.likes),1)],10,Je),t("button",{class:"action-btn",onClick:p=>ot(o)},[a(_,null,{default:n(()=>[a(v(xt))]),_:1}),e[21]||(e[21]=d(" 回复 ",-1))],8,Ke)]),o.replies&&o.replies.length>0?(r(),c("div",Qe,[(r(!0),c(w,null,b(o.replies,p=>(r(),c("div",{key:p.id,class:"reply-item"},[t("div",Ue,[t("img",{src:p.user.avatar,alt:p.user.name},null,8,Ge)]),t("div",We,[t("div",Xe,[t("span",Ye,i(p.user.name),1),t("span",ts,i(V(p.createdAt)),1)]),t("div",es,i(p.content),1)])]))),128))])):k("",!0)])]))),128))]),Z.value?(r(),c("div",ss,[a(f,{onClick:lt,loading:E.value},{default:n(()=>e[22]||(e[22]=[d(" 加载更多评论 ",-1)])),_:1,__:[22]},8,["loading"])])):k("",!0)])])])])):(r(),c("div",as,[a(dt,{icon:"error",title:"教程不存在","sub-title":"抱歉，您访问的教程不存在或已被删除"},{extra:n(()=>[a(f,{type:"primary",onClick:e[1]||(e[1]=o=>s.$router.push("/tutorials"))},{default:n(()=>e[23]||(e[23]=[d(" 返回教程列表 ",-1)])),_:1,__:[23]})]),_:1})])),a(ut,{right:40,bottom:40})])}}}),rs=St(os,[["__scopeId","data-v-c1081299"]]);export{rs as default};
